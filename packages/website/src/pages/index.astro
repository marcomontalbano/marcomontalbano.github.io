---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';

import { getCollection } from 'astro:content';

const projects = (await getCollection('projects', ))
  .sort((a, b) => a.data.createdAt > b.data.createdAt ? -1 : 0)
---

<Layout title="Marco Montalbano">
  <main>
    {projects.map(async project => {
      const { headings } = await project.render()
      const title = headings.find(h => h.depth === 1)?.text ?? project.data.name
      return (
        <section>
          <a href={`/project/${project.slug}`}>{title}</a>
        </section>
      )
    })}
  </main>
</Layout>
