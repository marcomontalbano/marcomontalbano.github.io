{
    "componentChunkName": "component---src-templates-project-tsx",
    "path": "/project/contentful-migration-tool",
    "result": {"pageContext":{"name":"contentful-migration-tool","homepageUrl":"","url":"https://github.com/marcomontalbano/contentful-migration-tool","title":"Contentful Migration Tool","cover":"https://raw.githubusercontent.com/marcomontalbano/contentful-migration-tool/main/cover.png","readme":"# Contentful Migration Tool\n\n[![Test](https://github.com/marcomontalbano/contentful-migration-tool/actions/workflows/test.yml/badge.svg)](https://github.com/marcomontalbano/contentful-migration-tool/actions/workflows/test.yml)\n[![Npm](https://img.shields.io/npm/v/contentful-migration-tool.svg?logo=npm&style=flat&label=version)](https://www.npmjs.com/package/contentful-migration-tool)\n[![Docker](https://img.shields.io/docker/v/marcomontalbano/contentful-migration.svg?logo=docker&logoColor=white&style=flat)](https://hub.docker.com/r/marcomontalbano/contentful-migration)\n\nRun Contentful migrations easier.\n\n## Why another CLI?\n\nI decided to created this CLI when I read this article: \"[Integrating migrations in a continuous delivery pipeline with CircleCI](https://www.contentful.com/developers/docs/tutorials/general/continuous-integration-with-circleci/)\". I found that approach very interesting, so I decided to build something very close to that.\n\nWith this CLI you can run migrations easier and keep track of migrations that you have already run.\n\nYou can integrate this into your existing CI without any effort.\n\n\n## CLI usage\n\nThe official [`contentful-migration`](https://github.com/contentful/contentful-migration) is a peerDependency, so it is required.\n\nYou can run directly this command:\n\n```sh\nnpx -p contentful-migration@latest -p contentful-migration-tool contentful-migration-tool run ./migrations\n```\n\nOr you can install **contentful-migration** and **contentful-migration-tool** as devDependencies and then just run:\n\n```sh\n# install dependencies\nnpm install --save-dev contentful-migration@latest contentful-migration-tool\n\n# run migrations\nnpx contentful-migration-tool run ./migrations\n```\n\nIf you use **TypeScript**, you will also need **ts-node** to run TypeScript migrations:\n\n```sh\n# install dependencies\nnpm install --save-dev contentful-migration@latest contentful-migration-tool ts-node\n\n# run migrations\nnpx ts-node ./node_modules/.bin/contentful-migration-tool run ./migrations\n```\n\nRemember to set the required environment variables before running the above commands.\n\n### Options\n\n#### Environment Variables\n\n* **`CONTENT_MANAGEMENT_TOKEN`** - ***required*** - Contentful Content Management Token. You can create one from the section *API keys* under your space settings.\n\n* **`SPACE_ID`** - ***required*** - Contentful Space ID. You can get the Space ID from the section *General settings* under your space settings. The Space ID is also visibile in the url.\n\n* **`ENVIRONMENT_ID`** - ***required*** - Contentful Environment ID.\n\n## Docker usage\n\nWith this Docker image you don't even need Node.js\n\n```sh\ndocker run --rm --name contentful-migration-runner -e CONTENT_MANAGEMENT_TOKEN=$CONTENT_MANAGEMENT_TOKEN -e SPACE_ID=$SPACE_ID -e ENVIRONMENT_ID=$ENVIRONMENT_ID -v $(pwd)/migrations:/app/migrations marcomontalbano/contentful-migration\n```\n\n### Options\n\n#### Environment Variables\n\n* **`CONTENT_MANAGEMENT_TOKEN`** - ***required*** - Contentful Content Management Token. You can create one from the section *API keys* under your space settings.\n\n* **`SPACE_ID`** - ***required*** - Contentful Space ID. You can get the Space ID from the section *General settings* under your space settings. The Space ID is also visibile in the url.\n\n* **`ENVIRONMENT_ID`** - ***required*** - Contentful Environment ID.\n\n#### Volumes\n\n* **`/app/migrations`** - ***required*** - Migrations folder.\n\n#### Arguments\n\n* **`--cfmversion 4.0.0`** - ***optional*** - Use this argument if you want to change the `contentful-migration` version. (default to `latest`)\n\n\n## Migrations folder\n\nEither you use **Docker** or **CLI**, you should create a `/migrations` (or whatever name) folder. This folder will contain all your migration description files.\n\nA migration description file is a `.js` or `.ts` file that contains a migration script. This scripts are written using [Contentful Migration](https://github.com/contentful/contentful-migration) syntax *which you are already familiar with*.\n\nThe filename must follow this naming convention:\n\n**`<version>` `-` `<description>`** `.ts`\n\n**version** starts from `1` and must be incremental.\n\n**description** is used to easily recognize the purpose of the migration.\n\nA real example can be: `1-create-author.ts`\n\n----\n\ne.g. `javascript`\n\n```js\nmodule.exports = function (migration, context) {\n  const author = migration.createContentType('author');\n  const name = author.createField('name');\n  name.type('Symbol').required(true);\n};\n```\n\ne.g. `typescript`\n\n```ts\nimport { MigrationFunction } from 'contentful-migration'\n\nconst migrate: MigrationFunction = (migration) => {\n  const author = migration.createContentType('author');\n  const name = author.createField('name');\n  name.type('Symbol').required(true);\n}\n\nexport = migrate\n```\n\n## Useful Readings\n\n* [Contentful Migration](https://github.com/contentful/contentful-migration)\n* [Contentful • CMS as code](https://www.contentful.com/help/cms-as-code/)\n* [Contentful • Scripting migrations with the Contentful CLI](https://www.contentful.com/developers/docs/tutorials/cli/scripting-migrations/)\n"}},
    "staticQueryHashes": ["3649515864","63159454"]}